<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <title>Pokemon Magazine</title>
</head>

<body>
  <div class="flipbook-container">
    <div class="flipbook">
      <div>
        <img src="image/1.webp" alt="" />
      </div>
      <div>
        <img src="image/2.webp" alt="" />
      </div>
      <div>
        <img src="image/3.webp" alt="" />
      </div>
      <div>
        <img src="image/4.webp" alt="" />
      </div>
      <div>
        <img src="image/5.webp" alt="" />
      </div>
      <div>
        <img src="image/6.webp" alt="" />
      </div>
      <div>
        <img src="image/7.webp" alt="" />
      </div>
      <div>
        <img src="image/8.webp" alt="" />
      </div>
      <div>
          <img src="image/9.webp" alt="" />
      </div>
      <div>
        <img src="image/10.webp" alt="" />
      </div>
      <div>
        <img src="image/11.webp" alt="" />
      </div>
      <div>
        <img src="image/12.webp" alt="" />
      </div>
      <div>
        <img src="image/13.webp" alt="" />
      </div>
      <div>
        <img src="image/14.webp" alt="" />
      </div>
      <div>
        <img src="image/15.webp" alt="" />
      </div>
      <div>
        <img src="image/16.webp" alt="" />
      </div>
    </div>
  </div>

  <script src="jquery.js"></script>
  <script src="turn.js"></script>
  <script>
    // Function to check if device is mobile
    function isMobile() {
      return window.innerWidth < 1024;
    }

    // Calculate dimensions based on viewport and aspect ratio
    function calculateDimensions() {
      const aspectRatio = 9/13.5;
      let width, height;
      
      if (isMobile()) {
        // Single page view
        width = Math.min(window.innerWidth * 0.95, window.innerHeight * aspectRatio * 0.95);
        height = width / aspectRatio;
      } else {
        // Double page view
        width = Math.min(window.innerWidth * 0.95, window.innerHeight * aspectRatio * 0.95 * 2);
        height = width / (aspectRatio * 2);
      }
      
      return {
        width: width,
        height: height
      };
    }

    // Initialize flipbook with appropriate display mode and dimensions
    function initFlipbook() {
      const dimensions = calculateDimensions();
      
      $(".flipbook").turn({
        display: isMobile() ? 'single' : 'double',
        width: dimensions.width,
        height: dimensions.height,
        autoCenter: true,
        acceleration: true,
        elevation: 50,
        gradients: true
      });
    }

    // Prevent default scroll behavior
    document.addEventListener('touchmove', function(e) {
      e.preventDefault();
    }, { passive: false });

    document.addEventListener('wheel', function(e) {
      e.preventDefault();
    }, { passive: false });

    // Initialize the flipbook
    $(document).ready(function() {
      initFlipbook();
      
      // Handle scroll events for page navigation with debounce
      let scrollTimeout;
      let isScrolling = false;
      
      $(window).on('wheel', function(event) {
        if (isScrolling) return;
        
        isScrolling = true;
        
        if (event.originalEvent.deltaY > 0) {
          // Scrolling down - next page
          $(".flipbook").turn("next");
        } else {
          // Scrolling up - previous page
          $(".flipbook").turn("previous");
        }
        
        // Reset scroll flag after animation completes
        setTimeout(function() {
          isScrolling = false;
        }, 500);
      });
      
      // For touch devices
      let touchStartY = 0;
      let isSwiping = false;
      
      $(document).on('touchstart', function(event) {
        touchStartY = event.originalEvent.touches[0].clientY;
      });
      
      $(document).on('touchmove', function(event) {
        if (isSwiping) return;
        
        const touchY = event.originalEvent.touches[0].clientY;
        const diff = touchStartY - touchY;
        
        // Threshold to determine swipe
        if (Math.abs(diff) > 50) {
          isSwiping = true;
          
          if (diff > 0) {
            // Swipe up - next page
            $(".flipbook").turn("next");
          } else {
            // Swipe down - previous page
            $(".flipbook").turn("previous");
          }
          
          // Reset swipe flag after animation completes
          setTimeout(function() {
            isSwiping = false;
            touchStartY = touchY;
          }, 500);
        }
      });
    });

    // Handle window resize to update dimensions and display mode
    $(window).on('resize', function() {
      const dimensions = calculateDimensions();
      
      $(".flipbook").turn("size", dimensions.width, dimensions.height);
      $(".flipbook").turn("display", isMobile() ? 'single' : 'double');
    });
  </script>
</body>

</html>